const CACHE_NAME="story-app-v1",urlsToCache=["/","/index.html","/app.bundle.js","/app.css","/manifest.json","/icons/icon-192x192.png","/icons/icon-512x512.png"];self.addEventListener("install",(e=>{console.log("âœ… Service Worker: installed"),e.waitUntil(caches.open(CACHE_NAME).then((e=>e.addAll(urlsToCache)))),self.skipWaiting()})),self.addEventListener("activate",(e=>{console.log("âœ… Service Worker: activated"),e.waitUntil(caches.keys().then((e=>Promise.all(e.map((e=>{if(e!==CACHE_NAME)return console.log("ðŸ§¹ Deleting old cache:",e),caches.delete(e)})))))),self.clients.claim()})),self.addEventListener("fetch",(e=>{e.respondWith(caches.match(e.request).then((t=>t||fetch(e.request).catch((()=>caches.match("/index.html"))))))})),self.addEventListener("push",(function(e){console.log("ðŸ“© Push event received");let t={};try{t=e.data?.json()||{}}catch(n){t={title:"Story App",message:e.data.text()}}const n=t.title||"Story App",s={body:t.message||"Notifikasi baru dari Dicoding!",icon:"/icons/icon-192x192.png",badge:"/icons/icon-192x192.png"};e.waitUntil(self.registration.showNotification(n,s))}));