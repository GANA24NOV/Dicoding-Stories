const CACHE_NAME="story-app-v1",urlsToCache=["/Dicoding-Stories/","/Dicoding-Stories/index.html","/Dicoding-Stories/app.bundle.js","/Dicoding-Stories/app.css","/Dicoding-Stories/manifest.json","/Dicoding-Stories/icons/icon-192x192.png","/Dicoding-Stories/icons/icon-512x512.png"];self.addEventListener("install",(e=>{console.log("âœ… Service Worker: installed"),e.waitUntil(caches.open(CACHE_NAME).then((e=>e.addAll(urlsToCache)))),self.skipWaiting()})),self.addEventListener("activate",(e=>{console.log("âœ… Service Worker: activated"),e.waitUntil(caches.keys().then((e=>Promise.all(e.map((e=>{if(e!==CACHE_NAME)return console.log("ðŸ§¹ Deleting old cache:",e),caches.delete(e)})))))),self.clients.claim()})),self.addEventListener("fetch",(e=>{e.respondWith(caches.match(e.request).then((i=>i||fetch(e.request).catch((e=>(console.error("Fetch failed; returning fallback.",e),caches.match("/Dicoding-Stories/index.html")))))))})),self.addEventListener("push",(function(e){console.log("ðŸ“© Push event received");let i={};try{i=e.data?.json()||{}}catch(t){i={title:"Story App",message:e.data.text()}}const t=i.title||"Story App",o={body:i.message||"Notifikasi baru dari Dicoding!",icon:"/Dicoding-Stories/icons/icon-192x192.png",badge:"/Dicoding-Stories/icons/icon-192x192.png"};e.waitUntil(self.registration.showNotification(t,o))}));